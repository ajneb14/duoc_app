"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7651],{7651:(C,f,r)=>{r.r(f),r.d(f,{AuthPageModule:()=>j});var g=r(177),a=r(4341),u=r(4742),m=r(4964),v=r(467),o=r(4438),h=r(4282),P=r(6552),y=r(3906);function A(e,l){1&e&&(o.j41(0,"div"),o.EFF(1,"El correo es requerido"),o.k0s())}function F(e,l){1&e&&(o.j41(0,"div"),o.EFF(1,"El correo no es v\xe1lido"),o.k0s())}function M(e,l){if(1&e&&(o.j41(0,"div",14),o.DNE(1,A,2,0,"div",15)(2,F,2,0,"div",15),o.k0s()),2&e){const i=o.XpG();o.R7$(),o.Y8G("ngIf",null==i.form.controls.email.errors?null:i.form.controls.email.errors.required),o.R7$(),o.Y8G("ngIf",null==i.form.controls.email.errors?null:i.form.controls.email.errors.email)}}function b(e,l){1&e&&(o.j41(0,"div"),o.EFF(1,"La contrase\xf1a es requerida"),o.k0s())}function E(e,l){if(1&e&&(o.j41(0,"div",14),o.DNE(1,b,2,0,"div",15),o.k0s()),2&e){const i=o.XpG();o.R7$(),o.Y8G("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required)}}const G=[{path:"",component:(()=>{var e;class l{constructor(){this.form=new a.gE({email:new a.MJ("",[a.k0.required,a.k0.email]),password:new a.MJ("",[a.k0.required])}),this.firebaseSvc=(0,o.WQX)(h.f),this.utilsSvc=(0,o.WQX)(P.T),this.loading=!1}ngOnInit(){}submit(){var n=this;return(0,v.A)(function*(){if(n.form.valid){const t=yield n.utilsSvc.loading();yield t.present();try{"admin@duocuc.cl"===n.form.value.email&&"admin123"===n.form.value.password?(n.utilsSvc.saveInLocalStorage("user",n.form.value),n.utilsSvc.routerLink("/main"),n.form.reset()):yield n.login(t)}catch(s){console.error("Error en submit:",s)}finally{t.dismiss()}}})()}login(n){var t=this;return(0,v.A)(function*(){try{var s;const d=null===(s=(yield t.firebaseSvc.login(t.form.value.email,t.form.value.password)).user)||void 0===s?void 0:s.uid;if(d){let c=localStorage.getItem(`userRole_${d}`);c||(c=yield t.firebaseSvc.getUserRole(d),localStorage.setItem(`userRole_${d}`,c)),t.utilsSvc.routerLink("profesor"===c?"/home":"/home-alumno")}}catch(p){console.error("Error en login:",p),t.utilsSvc.presentToast({message:"Error al iniciar sesi\xf3n, por favor intente nuevamente.",duration:2500,color:"danger",icon:"close-circle-outline"})}})()}}return(e=l).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-auth"]],decls:19,vars:6,consts:[[1,"d-flex-center","ion-margin-top"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],[1,"ion-padding","custom-margin"],[1,"ion-text-center","ion-padding-vertical"],[1,"duoc2"],[1,"duoc"],[2,"text-align","center","margin-bottom","20px"],["type","email","autocomplete","email","icon","mail-outline","label","Correo","label-placement","floating",3,"control"],["class","validators",4,"ngIf"],["type","password","autocomplete","current-password","icon","lock-closed-outline","label","Contrase\xf1a","label-placement","floating",3,"control"],["routerLink","/forgot-password",1,"ion-text-end"],[1,"ion-padding-vertical"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","log-in-outline"],[1,"validators"],[4,"ngIf"]],template:function(n,t){1&n&&(o.j41(0,"div",0)(1,"form",1),o.bIt("ngSubmit",function(){return t.submit()})("keypress.enter",function(){return t.submit()}),o.j41(2,"ion-card",2)(3,"div",3)(4,"h1",4),o.EFF(5,"DuocUc"),o.k0s(),o.j41(6,"h3",5),o.EFF(7," Bienvenido"),o.k0s()(),o.j41(8,"div",6),o.nrm(9,"app-custom-input",7),o.DNE(10,M,3,2,"div",8),o.nrm(11,"app-custom-input",9),o.DNE(12,E,2,1,"div",8),o.j41(13,"p",10),o.EFF(14,"\xbfOlvidaste tu contrase\xf1a?"),o.k0s(),o.j41(15,"div",11)(16,"ion-button",12),o.EFF(17," Ingresar "),o.nrm(18,"ion-icon",13),o.k0s()()()()()()),2&n&&(o.R7$(),o.Y8G("formGroup",t.form),o.R7$(8),o.Y8G("control",t.form.controls.email),o.R7$(),o.Y8G("ngIf",t.form.controls.email.invalid&&t.form.controls.email.touched),o.R7$(),o.Y8G("control",t.form.controls.password),o.R7$(),o.Y8G("ngIf",t.form.controls.password.invalid&&t.form.controls.password.touched),o.R7$(4),o.Y8G("disabled",t.form.invalid))},dependencies:[g.bT,a.qT,a.cb,u.Jm,u.b_,u.iq,u.N7,m.Wk,y.H,a.j4],styles:['.d-flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:100vh;width:100%}.submit[_ngcontent-%COMP%]{--background: #041d52;--color: #ffc400;margin-top:20px;height:45px}ion-button[routerLink="/sign-up"][_ngcontent-%COMP%]{--background: #ffc400;--color: #041d52;margin-top:10px;height:45px}.custom-margin[_ngcontent-%COMP%]{margin-top:10vh}.duoc[_ngcontent-%COMP%]{color:#041d52;font-size:1.5rem}.duoc2[_ngcontent-%COMP%]{color:#ffc400;font-size:1.5rem}']}),l})()},{path:"sign-up",loadChildren:()=>r.e(2076).then(r.bind(r,920)).then(e=>e.SignUpPageModule)},{path:"forgot-password",loadChildren:()=>r.e(2076).then(r.bind(r,7005)).then(e=>e.ForgotPasswordPageModule)}];let S=(()=>{var e;class l{}return(e=l).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[m.iI.forChild(G),m.iI]}),l})();var R=r(3887);let j=(()=>{var e;class l{}return(e=l).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[g.MD,a.YN,u.bv,S,R.G]}),l})()}}]);